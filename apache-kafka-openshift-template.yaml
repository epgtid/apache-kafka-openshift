    ##comienzo Template
  apiVersion: v1
  kind: Template
  metadata:
    name: kafka-zookeeper-openshift-mvilche
    labels:
      template: kafka-zookeeper-openshift-mvilche
      autor: "Martin_Fabrizzio_Vilche"
    annotations:
      openshift.io/display-name: "kafka-zookeeper-openshift-mvilche"
      iconClass: "icon-github"
      description: >-
        APACHE KAFKA + ZOOKEEPER
        Martin Fabrizzio Vilche.
        https://github.com/mvilche.

  objects:


############################## ZOOKEPEER


  - apiVersion: v1
    data:
      zoo.cfg: |-
        dataDir=/opt/zookeeper-data
        clientPort=2181
        initLimit=5
        syncLimit=2
        server.1=zk-0:2888:3888
        server.2=zk-1:2888:3888
        server.3=zk-2:2888:3888
        tickTime=2000
    kind: ConfigMap
    metadata:
      name: zookeeper

  - apiVersion: v1
    kind: Service
    metadata:
      name: zookeeper
      labels:
        app: zookeeper
    spec:
      ports:
      - port: 2888
        name: server
      - port: 3888
        name: leader-election
      clusterIP: None
      selector:
        app: zookeeper



  - apiVersion: v1
    kind: ImageStream
    metadata:
      labels:
        app: zookeeper
      name: zookeeper
    spec: {}


  - apiVersion: v1
    kind: BuildConfig
    metadata:
      labels:
        app: zookeeper
        build: zookeeper
      name: zookeeper
    spec:
      failedBuildsHistoryLimit: 5
      nodeSelector: null
      output:
        to:
          kind: ImageStreamTag
          name: 'zookeeper:3.5.5'
      postCommit: {}
      resources: {}
      runPolicy: Serial
      source:
        contextDir: zookeeper
        git:
          ref: master
          uri: 'https://github.com/mvilche/apache-kafka-openshift.git'
        type: Git
      strategy:
        dockerStrategy:
          dockerfilePath: Dockerfile
        type: Docker
      successfulBuildsHistoryLimit: 5
      triggers:
        - type: ConfigChange



  - apiVersion: apps/v1
    kind: StatefulSet
    metadata:
      name: zookeeper
    spec:
      selector:
        matchLabels:
          app: zookeeper
      serviceName: zookeeper
      replicas: 3
      template:
        metadata:
          labels:
            app: zookeeper
        spec:
          containers:
          - name: zookeeper
            image: zookeeper:3.5.5
            command:
            - bash
            - "-c"
            - |
              /opt/zookeeper/bin/zkServer.sh start-foreground /opt/zookeeper/conf/zoo.cfg
            ports:
            - containerPort: 2181
              name: client
            - containerPort: 2888
              name: server
            - containerPort: 3888
              name: leader-election
            resources:
              requests:
                cpu: 500m
                memory: 1Gi
      triggers:
        - type: ConfigChange
        - imageChangeParams:
            automatic: true
            containerNames:
              - zookeeper
            from:
              kind: ImageStreamTag
              name: "zookeeper:3.5.5"
          type: ImageChange


##############################